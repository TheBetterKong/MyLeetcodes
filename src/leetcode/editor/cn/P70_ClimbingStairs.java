/******************************* Javaï¼šçˆ¬æ¥¼æ¢¯ *******************************/
// å‡è®¾ä½ æ­£åœ¨çˆ¬æ¥¼æ¢¯ã€‚éœ€è¦ n é˜¶ä½ æ‰èƒ½åˆ°è¾¾æ¥¼é¡¶ã€‚
//
// æ¯æ¬¡ä½ å¯ä»¥çˆ¬ 1 æˆ– 2 ä¸ªå°é˜¶ã€‚ä½ æœ‰å¤šå°‘ç§ä¸åŒçš„æ–¹æ³•å¯ä»¥çˆ¬åˆ°æ¥¼é¡¶å‘¢ï¼Ÿ 
//
// æ³¨æ„ï¼šç»™å®š n æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ã€‚ 
//
// ç¤ºä¾‹ 1ï¼š 
//
// è¾“å…¥ï¼š 2
// è¾“å‡ºï¼š 2
// è§£é‡Šï¼š æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥çˆ¬åˆ°æ¥¼é¡¶ã€‚
// 1.  1 é˜¶ + 1 é˜¶
// 2.  2 é˜¶
//
// ç¤ºä¾‹ 2ï¼š 
//
// è¾“å…¥ï¼š 3
// è¾“å‡ºï¼š 3
// è§£é‡Šï¼š æœ‰ä¸‰ç§æ–¹æ³•å¯ä»¥çˆ¬åˆ°æ¥¼é¡¶ã€‚
// 1.  1 é˜¶ + 1 é˜¶ + 1 é˜¶
// 2.  1 é˜¶ + 2 é˜¶
// 3.  2 é˜¶ + 1 é˜¶
// 
// Related Topics åŠ¨æ€è§„åˆ’ 
// ðŸ‘ 1366 ðŸ‘Ž 0


/******************************* é¢˜ç›®æ€è·¯ *******************************/
// æœ¬é¢˜å¯ä»¥ç›´æŽ¥æ‰¾é€’æŽ¨å…³ç³»ï¼Œåˆ©ç”¨é€’æŽ¨æ¥æ±‚è§£ï¼š
//      è¦æƒ³çŸ¥é“è·³åˆ° n çº§å°é˜¶å¤šå°‘ç§è·³æ³•ï¼Œé‚£ä¹ˆåŒ…å«ä¸¤ç§æƒ…å†µï¼š
//          â‘  ä»Ž n-1 çº§å°é˜¶è·³ä¸€çº§åˆ° n çº§ï¼›
//          â‘¡ ä»Ž n-2 çº§å°é˜¶è·³ 2 çº§åˆ° n çº§å°é˜¶ã€‚
//      è¿™æ ·ï¼Œé€’å½’å…³ç³»å°±å‡ºæ¥äº†ï¼š
//          f(n) = f(n-1) + f(n-2)
// è¿™å°±æ˜¯ â€œæ–æ³¢æ‹‰å¥‘æ•°åˆ—â€ çš„æ±‚è§£é—®é¢˜ï¼›
// ä½†æ˜¯è¿™é‡Œï¼Œéœ€è¦é‡ç‚¹è®²è§£çš„æ˜¯ â€œæ–æ³¢æ‹‰å¥‘æ•°åˆ—â€ çš„å¿«é€Ÿç®—æ³•ï¼š
//      æ–¹æ³•ä¸€ï¼šçŸ©é˜µå¿«é€Ÿå¹‚
//          f(n-1) + f(n) = f(n+1) å¯ä»¥ç”¨çŸ©é˜µè½¬åŒ–ä¸ºï¼š
//          [ [1, 1], [1, 0] ] * [ f(n), f(n-1) ] = [ f(n+1), f(n) ] é€’æŽ¨ä¸‹åŽ»ï¼š
//          [ [1, 1], [1, 0] ]^n * [ f(1), f(0) ] = [ f(n+1), f(n) ] çŽ°åœ¨é—®é¢˜å°±æˆäº†æ±‚ [ [1, 1], [1, 0] ]^n
//          è€Œæ±‚ a^n å¯ä»¥è½¬åŒ–ä¸º ï¼ˆa^2) ^ (n/2)ï¼Œè¿™æ ·å¯ä»¥å°† n æ¬¡è¿ç®—è½¬æ¢ä¸º logn æ¬¡è¿ç®—ï¼ˆå¿«é€Ÿå¹‚ï¼‰
//      æ–¹æ³•äºŒï¼šæ±‚é€šé¡¹
//          é€’æŽ¨å…³ç³» f(n-1) + f(n) = f(n+1) å¯ä»¥å¾—å‡ºç‰¹å¾æ–¹ç¨‹ä¸ºï¼šx^2 = x + 1
//          æ±‚å¾— x1 = (1 + sqrt(5)) / 2ï¼Œx2 = (1 - sqrt(5)) / 2ï¼ŒäºŽæ˜¯é€šè§£å°±ä¸º f(n) = c1 * x1^2 + c2 * x2^2ï¼Œå†å°† f(0)ï¼Œf(1) å¸¦å…¥
//          å°±å¯ä»¥ç›´æŽ¥æ‹¿åˆ° f(n) çš„æ±‚è§£å¼

/******************************* é¢˜ç›®ä»£ç  *******************************/
package leetcode.editor.cn;

class P70_ClimbingStairs {
    public static void main(String[] args) {
        Solution solution = new P70_ClimbingStairs().new Solution();
        // TO TEST
        int n = 4;
        int answer = solution.climbStairs(n);
        System.out.println(answer);
    }

    //leetcode submit region begin(Prohibit modification and deletion)
    class Solution {
        public int climbStairs(int n) {
            int[][] p = {{1, 1}, {1, 0}};
            int[][] res = pow(p, n);
            return res[0][0];
        }

        // æ±‚çŸ©é˜µçš„ n æ¬¡å¹‚
        private int[][] pow(int[][] a, int n) {
            int[][] ans = {{1, 0}, {0, 1}};
            while (n > 0) {
                if ((n & 1) == 1) {
                    ans = multiply(ans, a);
                }
                n >>= 1;
                a = multiply(a, a);
            }
            return ans;
        }

        // ä¸¤ä¸ªçŸ©é˜µç›¸ä¹˜
        private int[][] multiply(int[][] a, int[][] b) {
            int[][] c = new int[2][2];
            for (int i = 0; i < 2; i++) {
                for (int j = 0; j < 2; j++) {
                    c[i][j] = a[i][0] * b[0][j] + a[i][1] * b[1][j];
                }
            }
            return c;
        }
    }
    //leetcode submit region end(Prohibit modification and deletion)

}

/******************************* ä»£ç è¯„ä»· *******************************/
// æ—¶é—´å¤æ‚åº¦ Oï¼ˆlognï¼‰
// ç©ºé—´å¤æ‚åº¦ Oï¼ˆ1)
