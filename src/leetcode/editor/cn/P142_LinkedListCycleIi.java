/******************************* Javaï¼šç¯å½¢é“¾è¡¨ II *******************************/
// ç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œè¿”å›é“¾è¡¨å¼€å§‹å…¥ç¯çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚ å¦‚æœé“¾è¡¨æ— ç¯ï¼Œåˆ™è¿”å› nullã€‚
//
// ä¸ºäº†è¡¨ç¤ºç»™å®šé“¾è¡¨ä¸­çš„ç¯ï¼Œæˆ‘ä»¬ä½¿ç”¨æ•´æ•° pos æ¥è¡¨ç¤ºé“¾è¡¨å°¾è¿æ¥åˆ°é“¾è¡¨ä¸­çš„ä½ç½®ï¼ˆç´¢å¼•ä» 0 å¼€å§‹ï¼‰ã€‚
// å¦‚æœ pos æ˜¯ -1ï¼Œåˆ™åœ¨è¯¥é“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚æ³¨æ„ï¼Œpos ä»…ä»…æ˜¯ç”¨äºæ ‡è¯†ç¯çš„æƒ…å†µï¼Œå¹¶ä¸ä¼šä½œä¸ºå‚æ•°ä¼ é€’åˆ°å‡½æ•°ä¸­ã€‚
//
// è¯´æ˜ï¼šä¸å…è®¸ä¿®æ”¹ç»™å®šçš„é“¾è¡¨ã€‚ 
//
// è¿›é˜¶ï¼š 
//
// ä½ æ˜¯å¦å¯ä»¥ä½¿ç”¨ O(1) ç©ºé—´è§£å†³æ­¤é¢˜ï¼Ÿ 
// 
//
// ç¤ºä¾‹ 1ï¼š 
//
// è¾“å…¥ï¼šhead = [3,2,0,-4], pos = 1
// è¾“å‡ºï¼šè¿”å›ç´¢å¼•ä¸º 1 çš„é“¾è¡¨èŠ‚ç‚¹
// è§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬äºŒä¸ªèŠ‚ç‚¹ã€‚
// 
//
// ç¤ºä¾‹ 2ï¼š 
//
// è¾“å…¥ï¼šhead = [1,2], pos = 0
// è¾“å‡ºï¼šè¿”å›ç´¢å¼•ä¸º 0 çš„é“¾è¡¨èŠ‚ç‚¹
// è§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚
// 
//
// ç¤ºä¾‹ 3ï¼š 
//
// è¾“å…¥ï¼šhead = [1], pos = -1
// è¾“å‡ºï¼šè¿”å› null
// è§£é‡Šï¼šé“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚
// 
//
// 
//
// æç¤ºï¼š 
//
// é“¾è¡¨ä¸­èŠ‚ç‚¹çš„æ•°ç›®èŒƒå›´åœ¨èŒƒå›´ [0, 104] å†… 
// -105 <= Node.val <= 105 
// pos çš„å€¼ä¸º -1 æˆ–è€…é“¾è¡¨ä¸­çš„ä¸€ä¸ªæœ‰æ•ˆç´¢å¼• 
// 
// Related Topics é“¾è¡¨ åŒæŒ‡é’ˆ 
// ğŸ‘ 1039 ğŸ‘ 0


/******************************* é¢˜ç›®æ€è·¯ *******************************/
// æœ¬é¢˜å’Œ P141 ä¸€æ ·ï¼Œç›´æ¥ä½¿ç”¨å¿«æ…¢åŒæŒ‡é’ˆéå†å³å¯åˆ¤æ–­æ˜¯å¦æœ‰ç¯ï¼Œä½†æ˜¯é—®é¢˜åœ¨äºï¼Œæ€æ ·ç¡®å®šå…¥ç¯ç‚¹çš„ä½ç½®
//
// åŒæ ·ï¼Œæˆ‘ä»¬å…ˆç¡®å®š fast å’Œ slow æŒ‡é’ˆï¼Œå…¶ä¸­ fast æŒ‡é’ˆä¸€æ¬¡èµ°ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œslow æŒ‡é’ˆä¸€æ¬¡èµ°ä¸€ä¸ªèŠ‚ç‚¹ï¼›
//
// å‡è®¾ï¼Œèµ·ç‚¹åˆ°å…¥ç¯ç‚¹çš„è·ç¦»ä¸º aï¼Œå…¥ç¯ç‚¹åˆ°ç›¸é‡ç‚¹çš„è·ç¦»ä¸º bï¼Œç›¸é‡ç‚¹è·ä¸‹ä¸€æ¬¡å…¥ç¯ç‚¹çš„è·ç¦»ä¸º cï¼Œæ­¤æ—¶ï¼Œé“¾è¡¨æ€»é•¿ a+b+c
// ç°åœ¨ï¼Œæˆ‘ä»¬å‡è®¾ç›¸é‡æ—¶ï¼Œfast èµ°è¿‡çš„è·ç¦»ä¸º a+n(b+c)+b
// æˆ‘ä»¬çŸ¥é“ fast æŒ‡é’ˆèµ°çš„è·¯ç¨‹ä¸€ç›´æ˜¯ slow æŒ‡é’ˆçš„äºŒå€ï¼Œæ‰€ä»¥å½“ slow æŒ‡é’ˆèµ°ç¯å½¢èµ°ä¸€åŠæ—¶ï¼Œfast æŒ‡é’ˆèµ°çš„è·¯ç¨‹ä¸€å®šå¤§äº
// ç­‰äºä¸€åœˆï¼Œæ‰€ä»¥å½“ slow æŒ‡é’ˆèµ°ä¸€åŠæˆ–è€…ä¸€åŠä»¥å‰ä¸¤è€…å¿…å®šç›¸é‡ï¼Œæ‰€ä»¥å¯ä»¥å¾—åˆ°å…³ç³»ï¼š
// a+n(b+c)+b = 2(a+b) ==> a=c+(nâˆ’1)(b+c)
// è¿™æ„å‘³ç€ï¼šä»ç›¸é‡ç‚¹åˆ°å…¥ç¯ç‚¹çš„è·ç¦»åŠ ä¸Š nâˆ’1 åœˆçš„ç¯é•¿ï¼Œæ°å¥½ç­‰äºä»é“¾è¡¨å¤´éƒ¨åˆ°å…¥ç¯ç‚¹çš„è·ç¦»ã€‚
//
// äºæ˜¯ï¼Œå½“å‘ç° slow ä¸ fast ç›¸é‡æ—¶ï¼Œæˆ‘ä»¬å†é¢å¤–ä½¿ç”¨ä¸€ä¸ªæŒ‡é’ˆ ptrã€‚
// èµ·å§‹ï¼Œå®ƒæŒ‡å‘é“¾è¡¨å¤´éƒ¨ï¼›éšåï¼Œå®ƒå’Œ slow æ¯æ¬¡å‘åç§»åŠ¨ä¸€ä¸ªä½ç½®ã€‚
// æœ€ç»ˆï¼Œå®ƒä»¬ä¼šåœ¨å…¥ç¯ç‚¹ç›¸é‡ã€‚

/******************************* é¢˜ç›®ä»£ç  *******************************/
package leetcode.editor.cn;

class P142_LinkedListCycleIi {
    public static void main(String[] args) {
        Solution solution = new P142_LinkedListCycleIi().new Solution();
        // TO TEST
        ListNode head = new ListNode(3);
        head.next = new ListNode(2);
        head.next.next = new ListNode(0);
        head.next.next.next = new ListNode(4);
        head.next.next.next.next = head.next;
        ListNode answer = solution.detectCycle(head);
        System.out.println(answer.val);
    }

    //leetcode submit region begin(Prohibit modification and deletion)
    /**
     * Definition for singly-linked list.
     * class ListNode {
     *     int val;
     *     ListNode next;
     *     ListNode(int x) {
     *         val = x;
     *         next = null;
     *     }
     * }
     */
    public class Solution {
        public ListNode detectCycle(ListNode head) {
            if (head == null || head.next == null) {
                return null;
            }
            ListNode fast = head, slow = head;
            while (fast != null) {
                slow = slow.next;
                if (fast.next != null) {
                    fast = fast.next.next;
                } else {
                    return null;
                }
                // ç›¸é‡äº†ï¼Œå¼€å§‹æ‰¾è¿æ¥ç‚¹
                if (fast == slow) {
                    ListNode ptr = head;
                    while (ptr != slow) {
                        ptr = ptr.next;
                        slow = slow.next;
                    }
                    return ptr;
                }
            }
            return null;
        }
    }
    //leetcode submit region end(Prohibit modification and deletion)

}

/******************************* ä»£ç è¯„ä»· *******************************/
// æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œåœ¨åˆ¤æ–­å¿«æ…¢æŒ‡é’ˆæ˜¯å¦ç›¸é‡æ—¶ï¼Œslow æŒ‡é’ˆèµ°è¿‡çš„è·ç¦»ä¸ä¼šè¶…è¿‡é“¾è¡¨çš„æ€»é•¿åº¦ï¼›å¯»æ‰¾å…¥ç¯ç‚¹æ—¶ï¼Œèµ°è¿‡çš„è·ç¦»ä¹Ÿä¸ä¼šè¶…è¿‡é“¾è¡¨çš„æ€»é•¿åº¦ã€‚
// ç©ºé—´å¤æ‚åº¦ï¼šO(1)