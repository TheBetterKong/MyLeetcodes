/******************************* Javaï¼šå¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•° *******************************/
// ç»™å®šä¸¤ä¸ªå¤§å°ä¸º m å’Œ n çš„æ­£åºï¼ˆä»å°åˆ°å¤§ï¼‰æ•°ç»„ nums1 å’Œ nums2ã€‚è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›è¿™ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°ã€‚
//
// è¿›é˜¶ï¼šä½ èƒ½è®¾è®¡ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ä¸º O(log (m+n)) çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜å—ï¼Ÿ 
//
// 
//
// ç¤ºä¾‹ 1ï¼š 
//
// è¾“å…¥ï¼šnums1 = [1,3], nums2 = [2]
// è¾“å‡ºï¼š2.00000
// è§£é‡Šï¼šåˆå¹¶æ•°ç»„ = [1,2,3] ï¼Œä¸­ä½æ•° 2
// 
//
// ç¤ºä¾‹ 2ï¼š 
//
// è¾“å…¥ï¼šnums1 = [1,2], nums2 = [3,4]
// è¾“å‡ºï¼š2.50000
// è§£é‡Šï¼šåˆå¹¶æ•°ç»„ = [1,2,3,4] ï¼Œä¸­ä½æ•° (2 + 3) / 2 = 2.5
// 
//
// ç¤ºä¾‹ 3ï¼š 
//
// è¾“å…¥ï¼šnums1 = [0,0], nums2 = [0,0]
// è¾“å‡ºï¼š0.00000
// 
//
// ç¤ºä¾‹ 4ï¼š 
//
// è¾“å…¥ï¼šnums1 = [], nums2 = [1]
// è¾“å‡ºï¼š1.00000
// 
//
// ç¤ºä¾‹ 5ï¼š 
//
// è¾“å…¥ï¼šnums1 = [2], nums2 = []
// è¾“å‡ºï¼š2.00000
// 
//
// 
//
// æç¤ºï¼š 
//
// 
// nums1.length == m 
// nums2.length == n 
// 0 <= m <= 1000 
// 0 <= n <= 1000 
// 1 <= m + n <= 2000 
// -106 <= nums1[i], nums2[i] <= 106 
// 
// Related Topics æ•°ç»„ äºŒåˆ†æŸ¥æ‰¾ åˆ†æ²»ç®—æ³• 
// ğŸ‘ 3529 ğŸ‘ 0


/******************************* é¢˜ç›®æ€è·¯ *******************************/
// æœ€ç®€å•çš„åŠæ³•æ˜¯ç›´æ¥ä½¿ç”¨åŒæŒ‡é’ˆéå†æŸ¥æ‰¾ï¼Œæ‰¾åˆ°æ­£ç¡®çš„ä¸­ä½æ•°ä½ç½®å³å¯ï¼Œä½†æ˜¯è¿™æ ·çš„æ—¶é—´å¤æ‚åº¦ O(m+n)ï¼Œä¼šè¶…æ—¶
// ä¸‹é¢æ˜¯å®˜æ–¹çš„ä¸¤ç§æ€è·¯ï¼š
// æ–¹æ³•ä¸€ï¼šäºŒåˆ†æŸ¥æ‰¾
//      é—®é¢˜è½¬æ¢ï¼š
//          è‹¥ m+n ä¸ºå¥‡æ•°ï¼Œåˆ™ä¸­ä½æ•°ä¸ºä¸¤æ•°ç»„åˆå¹¶åï¼Œç¼–å·ä¸º (m+n)/2 çš„å…ƒç´ ï¼›
//          è‹¥ m+n ä¸ºå¥‡æ•°ï¼Œåˆ™ä¸­ä½æ•°ä¸ºä¸¤æ•°ç»„åˆå¹¶åï¼Œç¼–å·ä¸º (m+n)/2 å’Œ ç¼–å·ä¸º (m+n)/2+1 çš„å…ƒç´ çš„å‡å€¼ï¼›
//          æ‰€ä»¥é—®é¢˜å°±å˜æˆäº†ï¼Œæ±‚åˆå¹¶æ•°ç»„ä¸­ï¼Œç¬¬ k å°çš„æ•°ï¼ˆæ³¨æ„ k å’Œç¼–å·çš„å…³ç³»ï¼‰ï¼›
//      äºŒåˆ†æŸ¥æ‰¾çš„æ€æƒ³ï¼š
//          ä¸‰ç§æŸ¥æ‰¾æƒ…å†µï¼š
//              â‘  å¦‚æœ A[k/2âˆ’1] < B[k/2âˆ’1]ï¼Œåˆ™æ¯” A[k/2âˆ’1] å°çš„æ•°æœ€å¤šåªæœ‰ A çš„å‰ k/2âˆ’1 ä¸ªæ•°å’Œ B çš„å‰ k/2âˆ’1 ä¸ªæ•°ï¼Œ
//                 å³æ¯” A[k/2âˆ’1] å°çš„æ•°æœ€å¤šåªæœ‰ kâˆ’2 ä¸ªï¼Œå› æ­¤ A[k/2âˆ’1] ä¸å¯èƒ½æ˜¯ç¬¬ k ä¸ªæ•°ï¼ŒA[0] åˆ° A[k/2âˆ’1] ä¹Ÿéƒ½ä¸å¯èƒ½æ˜¯ç¬¬ k ä¸ªæ•°ï¼Œå¯ä»¥å…¨éƒ¨æ’é™¤ã€‚
//              â‘¡ å¦‚æœ A[k/2âˆ’1] > B[k/2âˆ’1]ï¼Œåˆ™å¯ä»¥æ’é™¤ B[0] åˆ° B[k/2âˆ’1]ã€‚
//              â‘¢ å¦‚æœ A[k/2âˆ’1] = B[k/2âˆ’1]ï¼Œåˆ™å¯ä»¥å½’å…¥ç¬¬ä¸€ç§æƒ…å†µå¤„ç†ã€‚
//          æ¯”è¾ƒ A[k/2âˆ’1] å’Œ B[k/2âˆ’1] ä¹‹åï¼Œå¯ä»¥æ’é™¤ k/2 ä¸ªä¸å¯èƒ½æ˜¯ç¬¬ k å°çš„æ•°ï¼ŒæŸ¥æ‰¾èŒƒå›´ç¼©å°äº†ä¸€åŠã€‚åŒæ—¶ï¼Œæˆ‘ä»¬å°†åœ¨æ’é™¤åçš„æ–°æ•°ç»„ä¸Šç»§ç»­è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œå¹¶ä¸”æ ¹æ®æˆ‘ä»¬æ’é™¤æ•°çš„ä¸ªæ•°ï¼Œå‡å°‘ k çš„å€¼ï¼›
//          ä¸‰ç§æƒ…å†µéœ€è¦ç‰¹æ®Šå¤„ç†ï¼š
//              â‘  å¦‚æœ A[k/2âˆ’1] æˆ–è€… B[k/2âˆ’1] è¶Šç•Œï¼Œå¯ä»¥é€‰å–å¯¹åº”æ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¿…é¡»æ ¹æ®æ’é™¤æ•°çš„ä¸ªæ•°å‡å°‘ k çš„å€¼ï¼Œè€Œä¸èƒ½ç›´æ¥å°† k å‡å» k/2ã€‚
//              â‘¡ å¦‚æœä¸€ä¸ªæ•°ç»„ä¸ºç©ºï¼Œè¯´æ˜è¯¥æ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ éƒ½è¢«æ’é™¤ï¼Œå¯ä»¥ç›´æ¥è¿”å›å¦ä¸€ä¸ªæ•°ç»„ä¸­ç¬¬ k å°çš„å…ƒç´ ã€‚
//              â‘¢ å¦‚æœ k=1ï¼Œè¿”å›ä¸¤ä¸ªæ•°ç»„é¦–å…ƒç´ çš„æœ€å°å€¼ï¼›
//      æ—¶é—´å¤æ‚åº¦ï¼šO(log(m+n))
//      ç©ºé—´å¤æ‚åº¦ï¼šO(1)
// æ–¹æ³•äºŒï¼šåˆ’åˆ†æ•°ç»„
//      é—®é¢˜è½¬æ¢ï¼š
//          ä¸­ä½æ•°çš„ä½œç”¨ï¼Œå°†é›†åˆåˆ†ä¸ºä¸¤ä¸ªé•¿åº¦ç›¸ç­‰çš„å­é›†ï¼Œå¹¶ä¸”ä¸€ä¸ªå­é›†çš„å…ƒç´ æ€»æ˜¯å°äºå¦ä¸€ä¸ªå­é›†ï¼›
//          å¯¹æ•°ç»„ A ä»ä½ç½® i å¤„ åˆ†ä¸º A[0, i-1] å’Œ A[i, ...] ä¸¤éƒ¨åˆ†ï¼Œå¯¹æ•°ç»„ B ä»ä½ç½® j å¤„ åˆ†ä¸º A[0, j-1] å’Œ A[j, ...] ä¸¤éƒ¨åˆ†ï¼›
//          æ¥ä¸‹æ¥å°±æ˜¯è¦ä¿è¯ï¼ši+j = mâˆ’i+nâˆ’jï¼ˆå½“ m+n ä¸ºå¶æ•°ï¼‰æˆ– i+j = mâˆ’i+nâˆ’j+1ï¼ˆå½“ m+n ä¸ºå¥‡æ•°ï¼‰ã€‚ç­‰å·å·¦ä¾§ä¸ºå‰ä¸€éƒ¨åˆ†çš„å…ƒç´ ä¸ªæ•°ï¼Œç­‰å·å³ä¾§ä¸ºåä¸€éƒ¨åˆ†çš„å…ƒç´ ä¸ªæ•°ã€‚
//          å°†ä¸Šè¿°å…¬å¼å˜å‹ï¼Œå°±å¯ä»¥ç»Ÿä¸€ä¸ºï¼ši+j = (m+n+1)/2
//      ä¿è¯çš„ä¸¤ä¸ªæ¡ä»¶ï¼š
//          â‘  0 â‰¤ i â‰¤ mï¼Œ0 â‰¤ j â‰¤ nã€‚å¦‚æœæˆ‘ä»¬è§„å®š A çš„é•¿åº¦å°äºç­‰äº B çš„é•¿åº¦ï¼Œå³ mâ‰¤nã€‚è¿™æ ·å¯¹äºä»»æ„çš„ iâˆˆ[0,m]ï¼Œéƒ½æœ‰ j = (m+n+1)/2 - i âˆˆ[0,n]ï¼Œ
//             é‚£ä¹ˆæˆ‘ä»¬åœ¨ [0,m] çš„èŒƒå›´å†…æšä¸¾ i å¹¶å¾—åˆ° jï¼Œå°±ä¸éœ€è¦é¢å¤–çš„æ€§è´¨äº†ã€‚
//          â‘¡ B[jâˆ’1] â‰¤ A[i] ä»¥åŠ A[iâˆ’1] â‰¤ B[j]ï¼Œå³å‰ä¸€éƒ¨åˆ†çš„æœ€å¤§å€¼å°äºç­‰äºåä¸€éƒ¨åˆ†çš„æœ€å°å€¼ã€‚
//      ç°åœ¨çš„é—®é¢˜å°±ç›¸å½“äºæ˜¯ï¼š
//          åœ¨ [0,m] ä¸­æ‰¾åˆ°æœ€å¤§çš„ iï¼Œä½¿å¾—ï¼šj = (m+n+1)/2 - iã€‚
//          å› æ­¤æˆ‘ä»¬å¯ä»¥å¯¹ i åœ¨ [0,m] çš„åŒºé—´ä¸Šè¿›è¡ŒäºŒåˆ†æœç´¢ï¼Œæ‰¾åˆ°æœ€å¤§çš„æ»¡è¶³ A[iâˆ’1] â‰¤ B[j] çš„ i å€¼ï¼Œå°±å¾—åˆ°äº†åˆ’åˆ†çš„æ–¹æ³•ã€‚
//          æ­¤æ—¶ï¼Œåˆ’åˆ†å‰ä¸€éƒ¨åˆ†å…ƒç´ ä¸­çš„æœ€å¤§å€¼ï¼Œä»¥åŠåˆ’åˆ†åä¸€éƒ¨åˆ†å…ƒç´ ä¸­çš„æœ€å°å€¼ï¼Œæ‰å¯èƒ½ä½œä¸ºå°±æ˜¯è¿™ä¸¤ä¸ªæ•°ç»„çš„ä¸­ä½æ•°ã€‚
//      ä»£ç å¦‚ä¸‹ï¼š
//        class Solution {
//            public double findMedianSortedArrays(int[] nums1, int[] nums2) {
//                if (nums1.length > nums2.length) {
//                    return findMedianSortedArrays(nums2, nums1);
//                }
//
//                int m = nums1.length;
//                int n = nums2.length;
//                int left = 0, right = m;
//                // median1ï¼šå‰ä¸€éƒ¨åˆ†çš„æœ€å¤§å€¼
//                // median2ï¼šåä¸€éƒ¨åˆ†çš„æœ€å°å€¼
//                int median1 = 0, median2 = 0;
//
//                while (left <= right) {
//                    // å‰ä¸€éƒ¨åˆ†åŒ…å« nums1[0 .. i-1] å’Œ nums2[0 .. j-1]
//                    // åä¸€éƒ¨åˆ†åŒ…å« nums1[i .. m-1] å’Œ nums2[j .. n-1]
//                    int i = (left + right) / 2;
//                    int j = (m + n + 1) / 2 - i;
//
//                    // nums_im1, nums_i, nums_jm1, nums_j åˆ†åˆ«è¡¨ç¤º nums1[i-1], nums1[i], nums2[j-1], nums2[j]
//                    int nums_im1 = (i == 0 ? Integer.MIN_VALUE : nums1[i - 1]);
//                    int nums_i = (i == m ? Integer.MAX_VALUE : nums1[i]);
//                    int nums_jm1 = (j == 0 ? Integer.MIN_VALUE : nums2[j - 1]);
//                    int nums_j = (j == n ? Integer.MAX_VALUE : nums2[j]);
//
//                    if (nums_im1 <= nums_j) {
//                        median1 = Math.max(nums_im1, nums_jm1);
//                        median2 = Math.min(nums_i, nums_j);
//                        left = i + 1;
//                    } else {
//                        right = i - 1;
//                    }
//                }
//
//                return (m + n) % 2 == 0 ? (median1 + median2) / 2.0 : median1;
//            }
//        }
//      æ—¶é—´å¤æ‚åº¦ï¼šO(logmin(m,n)))
//      ç©ºé—´å¤æ‚åº¦ï¼šO(1)








/******************************* é¢˜ç›®ä»£ç  *******************************/
package leetcode.editor.cn;

class P4_MedianOfTwoSortedArrays {
    public static void main(String[] args) {
        Solution solution = new P4_MedianOfTwoSortedArrays().new Solution();
        // TO TEST
        int[] nums1 = {1, 2};
        int[] nums2 = {3, 4};
        double answer = solution.findMedianSortedArrays(nums1, nums2);
        System.out.println(answer);
    }

    //leetcode submit region begin(Prohibit modification and deletion)
    class Solution {
        public double findMedianSortedArrays(int[] nums1, int[] nums2) {
            int len1 = nums1.length, len2 = nums2.length;
            int len = len1 + len2;
            double midian;
            if (len % 2 == 1) {
                midian = getKthElement(nums1, nums2, len / 2 + 1); // æ³¨æ„å…ƒç´ ç´¢å¼•ä¸ç¬¬ k å°çš„å¯¹åº”å…³ç³»
            } else {
                midian = (getKthElement(nums1, nums2, len / 2) + getKthElement(nums1, nums2, len / 2 + 1)) / 2.0;
            }
            return midian;
        }


        private int getKthElement(int[] nums1, int[] nums2, int k) {
            int len1 = nums1.length, len2 = nums2.length;
            int index1 = 0, index2 = 0;

            while (true) {
                // åˆ¤æ–­è¾¹ç•Œ
                if (index1 == len1)     // ç›´æ¥è¿”å›å¦ä¸€ä¸ªæ•°ç»„ä¸­ç¬¬ k å°çš„å…ƒç´ ã€‚
                    return nums2[index2 + k - 1];
                if (index2 == len2)
                    return nums1[index1 + k - 1];
                if (k == 1)
                    return Math.min(nums1[index1], nums2[index2]);

                // æ­£å¸¸æƒ…å†µï¼š
                int newIndex1 = Math.min(index1 + k / 2, len1) - 1; // æ›´æ–°ç”¨æ¥æ¯”è¾ƒçš„å…ƒç´ ç´¢å¼•ï¼Œå¹¶é˜²æ­¢è¶Šç•Œ
                int newIndex2 = Math.min(index2 + k / 2, len2) - 1;
                if (nums1[newIndex1] <= nums2[newIndex2]) {
                    k -= (newIndex1 - index1 + 1);  // æ ¹æ®ç´¢å¼•æ±‚è¢«æ’é™¤çš„å…ƒç´ æ•°æ¥æ›´æ–° k å€¼ï¼Œæ³¨æ„ä¸è¦ç›´æ¥å‡ k/2
                    index1 = newIndex1 + 1;
                } else {
                    k -= (newIndex2 - index2 + 1);
                    index2 = newIndex2 + 1;
                }
            }
        }
    }
    //leetcode submit region end(Prohibit modification and deletion)

}

/******************************* ä»£ç è¯„ä»· *******************************/
// è§é—®é¢˜åˆ†æéƒ¨åˆ†